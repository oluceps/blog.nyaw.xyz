---
date: 2024-07-28T03:45:41.756979102+08:00
description:
categories:
  - 记录
tags:
  - openssh
  - cryptography
  - sign
title: 使用 openssh 密钥签名
---


作为一种方便的替代PGP的方式，当然也可以使用minisign。


## Sign

```console
  ssh-keygen -Y sign -f ./OPENSSH_KEY  -n FILE_NAME ./FILE
```

在当前目录会生成后缀.sig的文件。

## Verify

首先要创建一个 `allowed_signers` 文件, 把邮箱后面加空格黏贴上公钥放进去就可以了。

比如

```
i@oluceps.uk sk-ssh-ed25519@openssh.com AAAAGnNrLXNzaC1lZDI1NAIBFIalie2guY29tAAAAIH+HwSzDbhaisdjABAdibbdsvwqfla4GY6EuD1yGuNkX6QAAAaifAIfalAALjg5NTQzMzc1 ssh:1689543375
```

使用这个验证签名

```console
  cat FILE | ssh-keygen -Y verify -f allowed_signers -I i@oluceps.uk -n FILE -s FILE.sig
  Good "FILE" signature for i@oluceps.uk with ED25519-SK key SHA256:iabd+DxjcImivTYhsuQTlPhTIlYr2aHojF3YaisdbM
```

> 作为 [这篇博文](https://www.agwa.name/blog/post/ssh_signatures) 的简短助记。
