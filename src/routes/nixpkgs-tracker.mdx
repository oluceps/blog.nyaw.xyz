---
date: 2024-08-07T14:32:44.102070998+00:00
description: Where the pr goes
categories:
  - 工具
tags:
  - 工具
  - nixpkgs
  - tracker
title: Nixpkgs Pull Request Tracker
---

import Cpn from "../ingredients/nixpkgs-tracker"

<div class="h-[45vh]">
  <Cpn />
</div>

---

You could also use RESTful API:

```bash
# ...?pr=123&branch=master&branch=nixos-24.11&token=xxxxyyyy
curl https://blog.nyaw.xyz/api/pr-stat{?pr,branch*,token}
```

Will return like this:

```json
{
  "title": "insync: 3.9.1.60010 -> 3.9.3.60019",
  "state": "merged",
  "user": "hellwolf",
  "merge": {
    "staging-next": true,
    "master": true,
    "nixos-unstable-small": true,
    "nixpkgs-unstable": true,
    "nixos-unstable": true
  }
}
```

## OpenAPI Spec

```yaml
openapi: 3.0.3
info:
  title: PR Status API
  version: 1.0.0
  description: API to fetch the status of a pull request for different branches

paths:
  /api/pr-stat:
    get:
      summary: Get PR Status
      description: Retrieve the status of a pull request across multiple branches
      parameters:
        - name: pr
          in: query
          required: true
          schema:
            type: integer
          description: The pull request number
        - name: token
          in: query
          required: false
          schema:
            type: string
          description: API token that used in server query (to github)
        - name: branch
          in: query
          required: false
          schema:
            type: array
            items:
              type: string
          description: Branches to check the PR status against. Leave empty to query common branches
      responses:
        '200':
          description: Successful response with the PR status
          content:
            application/json:
              schema:
                type: object
                properties:
                  title:
                    type: string
                    description: The title of the pull request
                    example: "insync: 3.9.1.60010 -> 3.9.3.60019"
                  state:
                    type: string
                    description: The state of the pull request (e.g., open, closed, merged)
                    example: "merged"
                  user:
                    type: string
                    description: The username of the person who created the pull request
                    example: "hellwolf"
                  merge:
                    type: object
                    description: Merge status for various branches
                    additionalProperties:
                      type: boolean
                    example:
                      staging-next: true
                      master: true
                      nixos-unstable-small: true
                      nixpkgs-unstable: true
                      nixos-unstable: true
        '400':
          description: Invalid request parameters
        '404':
          description: PR not found
        '500':
          description: Sth else. Describe in body, maybe
```

---

Based on ocfox' [project](https://github.com/ocfox/nixpkgs-tracker) Thanks~
